---
import { getCollection, render } from "astro:content";
import type { GetStaticPaths } from "astro";
import MainLayout from "../../layouts/MainLayout.astro";
import HeroService from "../../components/HeroService.astro";
import FeaturesService from "../../components/FeaturesService.astro";
import Gallery from "../../components/Gallery.astro";
import ParallaxService from "../../components/ParallaxService.astro";
import FaqService from "../../components/FaqService.astro";
export const getStaticPaths = ( async () => {
  const services = await getCollection('services');
  return services.map( entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}) satisfies GetStaticPaths;
const { entry } = Astro.props;
const { Content } = await render(entry);
const data = entry.data;
---

<MainLayout 
  title={ data.title }
  description={`Servicio profesional de ${data.h1} en Alicante y Costa Blanca. Presupuesto sin compromiso.`}
>
  <main>
    <HeroService 
      title={ data.h1} 
      subtitle={ data.subtitle } 
      image={ data.headerImage } 
    />

    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Service",
        "@id": `https://reinamultiservicios.es/servicios/${entry.slug}#service`,
        "name": data.h1,
        "description": data.subtitle,
        "provider": {
          "@type": "LocalBusiness",
          "@id": "https://reinamultiservicios.es/#localbusiness"
        },
        "areaServed": {
          "@type": "AdministrativeArea",
          "name": "Alicante"
        },
        "availableChannel": {
          "@type": "ServiceChannel",
          "serviceLocation": {
            "@type": "Place",
            "address": {
              "@type": "PostalAddress",
              "addressLocality": "La Nucia",
              "addressRegion": "Alicante",
              "addressCountry": "ES"
            }
          }
        },
        "hasOfferCatalog": {
          "@type": "OfferCatalog",
          "name": data.h1,
          "itemListElement": data.features.map(feature => ({
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": feature
            }
          }))
        }
      })}
    </script>

    <FeaturesService features={ data.features } />
    <Gallery images={ data.gallery }/>
    <ParallaxService 
      image={ data.parallaxImage } 
      slogan={ data.slogan } 
    />
    <FaqService faqs={ data.faqs }/>
  </main>
</MainLayout>
